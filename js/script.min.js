var myMap,links=document.querySelectorAll(".button-login"),popup=document.querySelector(".modal-login"),loginName=document.querySelector("[name=login]"),loginMail=document.querySelector("[name=email]"),loginText=document.querySelector("[name=problems]"),overlay=document.querySelector(".modal-overlay"),close=document.querySelectorAll(".modal-close"),form=popup.querySelector("form"),formSite=document.querySelector(".login-form"),logName=document.querySelector("[name=user-name]"),logMail=document.querySelector("[name=user-mail]"),errorText=document.querySelector(".modal-error-form"),popupErrorText=document.querySelector(".modal-error-sending"),storage="",isStorageSupport=!1;links.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show"),overlay.classList.add("modal-show"),storage&&(loginName.value=storage,loginMail.value=storage,loginText.focus()),storage?(loginName.value=storage,loginMail.focus()):loginName.focus()})}),close.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show"),overlay.classList.remove("modal-show")})});try{storage=localStorage.getItem("login")}catch(e){isStorageSupport=!1}function init(){myMap=new ymaps.Map("map",{center:[48.0102,37.8634],zoom:16},{searchControlProvider:"yandex#search"}),myGeoObject=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[48.0101,37.8642]},properties:{iconContent:"IT-GIGANTS",hintContent:"We are here"}},{preset:"islands#yellowStretchyIcon"}),myMap.geoObjects.add(myGeoObject)}form.addEventListener("submit",function(e){loginName.value&&loginMail.value?isStorageSupport&&localStorage.setItem("login",login):(e.preventDefault(),popup.classList.add("modal-error"),popupErrorText.classList.add("modal-show"))}),formSite.addEventListener("submit",function(e){logName.value&&logMail.value?isStorageSupport&&localStorage.setItem("login",login):(e.preventDefault(),errorText.classList.add("modal-show"))}),ymaps.ready(init);